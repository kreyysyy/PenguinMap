{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["FILE_GeoJSON","App","props","SELECT_ALL","state","lng","lat","zoom","dropdownPlace","dropdownPlaceSelected","checkboxPenguin","Map","set","geojson","map","checkboxPenguinChanged","bind","dropdownPlaceChanged","this","createMap","readGeoJSON","Form","Group","controlId","Label","Control","as","custom","value","onChange","item","Array","from","keys","key","checked","get","Check","type","label","replace","Container","fluid","Row","Col","xs","sm","md","lg","xl","className","ref","el","mapContainer","id","fetch","response","json","console","log","places","Set","features","x","properties","place","sort","f","penguin","split","p","add","penguins","box","setState","mapboxgl","container","style","version","sources","OSM","tiles","tileSize","layers","source","glyphs","attributionControl","customAttribution","center","on","addSource","data","addLayer","layout","paint","getCenter","getZoom","popup","Popup","closeButton","closeOnClick","e","getCanvas","cursor","coordinates","geometry","slice","penguinsHTML","join","description","Math","abs","lngLat","setLngLat","setHTML","addTo","remove","event","target","loaded","setFilter","boxState","check","isAllChecked","val","placeSet","includes","React","Component","GraphPenguinNumPerPlace","a","b","penguin_num","graph","y","orientation","title","showlegend","margin","t","height","xaxis","side","yaxis","automargin","config","responsive","displayModeBar","GraphPlaceNumPerPenguin","penNum","pens","pen","has","penNumArray","push","num","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8363370b.chunk.js","sourcesContent":["import \"./App.css\";\nimport React from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Form from \"react-bootstrap/Form\";\nimport mapboxgl from \"mapbox-gl\"; // or \"const mapboxgl = require('mapbox-gl');\"\nimport Plot from \"react-plotly.js\";\n\nconst FILE_GeoJSON = \"./Place_PenguinList.geojson\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.SELECT_ALL = \"＜全て＞\";\n\n    this.state = {\n      lng: 136,\n      lat: 37,\n      zoom: 3.5,\n      dropdownPlace: [],\n      dropdownPlaceSelected: this.SELECT_ALL,\n      checkboxPenguin: new Map().set(this.SELECT_ALL, true),\n      geojson: null,\n    };\n\n    this.map = null;\n\n    this.checkboxPenguinChanged = this.checkboxPenguinChanged.bind(this);\n    this.dropdownPlaceChanged = this.dropdownPlaceChanged.bind(this);\n  }\n\n  componentDidMount() {\n    this.createMap();\n    this.readGeoJSON();\n  }\n\n  render() {\n    let checkboxPenguin = null; // チェックボックス（ペンギン）\n    let dropdownPlace = null; // ドロップダウンリスト（動物園・水族館名）\n\n    // ドロップダウンリスト（動物園・水族館）を用意する\n    dropdownPlace = (\n      <Form>\n        <Form.Group controlId=\"exampleForm.SelectCustom\">\n          <Form.Label>動物園・水族館</Form.Label>\n          <Form.Control\n            as=\"select\"\n            custom\n            value={this.state.dropdownPlaceSelected}\n            onChange={this.dropdownPlaceChanged}\n          >\n            {this.state.dropdownPlace.map((item) => (\n              <option key={item} value={item}>\n                {item}\n              </option>\n            ))}\n          </Form.Control>\n        </Form.Group>\n      </Form>\n    );\n\n    // チェックボックス（ペンギン）を用意する\n    checkboxPenguin = (\n      <Form>\n        <Form.Label>ペンギン</Form.Label>\n        {Array.from(this.state.checkboxPenguin.keys()).map((key) => {\n          const checked = this.state.checkboxPenguin.get(key);\n          return (\n            <Form.Check\n              key={key}\n              value={key}\n              type=\"checkbox\"\n              checked={checked}\n              label={key.replace(/ペンギン$/, \"\")}\n              onChange={this.checkboxPenguinChanged}\n            />\n          );\n        })}\n      </Form>\n    );\n\n    return (\n      <Container fluid>\n        <Row>\n          <Col xs={12} sm={8} md={9} lg={5} xl={6}>\n            <div className=\"container-frame\">\n              {/** マップの<div>で装飾を行うと地図上でポップアップ位置がズレるため、外側の<div>で装飾する */}\n              <div\n                ref={(el) => (this.mapContainer = el)}\n                className=\"map-container\"\n              />\n              <div className=\"map-overlay\">\n                <div className=\"map-title\">\n                  <h5>ペンギンマップ</h5>\n                  ペンギンがいる動物園・水族館\n                </div>\n                <div id=\"legend\" className=\"map-legend\">\n                  飼育されているペンギンの種類数\n                  <div className=\"map-legend-bar\"></div>\n                  <div className=\"map-legend-bar-text\">1 8</div>\n                </div>\n              </div>\n            </div>\n          </Col>\n          <Col xs={4} sm={4} md={3} lg={3} xl={2}>\n            <div className=\"container-frame\">\n              <div className=\"selector-container\">\n                {dropdownPlace}\n                {checkboxPenguin}\n              </div>\n            </div>\n          </Col>\n          <Col xs={8} sm={12} md={12} lg={4} xl={4}>\n            <GraphPenguinNumPerPlace\n              geojson={this.state.geojson}\n            ></GraphPenguinNumPerPlace>\n            <GraphPlaceNumPerPenguin\n              geojson={this.state.geojson}\n            ></GraphPlaceNumPerPenguin>\n          </Col>\n        </Row>\n      </Container>\n    );\n  }\n\n  /**\n   * GeoJSONファイルを読み込む\n   */\n  async readGeoJSON() {\n    const response = await fetch(FILE_GeoJSON);\n    const geojson = await response.json();\n    console.log(\"read file: \" + FILE_GeoJSON);\n\n    // 動物園・水族館の配列\n    const places = Array.from(\n      new Set(geojson.features.map((x) => x.properties.place))\n    ).sort();\n\n    // ペンギンの配列\n    const set = new Set();\n    for (let f of geojson.features)\n      for (let p of f.properties.penguin.split(\"_\")) set.add(p);\n    const penguins = Array.from(set).sort();\n\n    // チェックボックスの状態を初期化\n    const box = new Map();\n    box.set(this.SELECT_ALL, true);\n    for (let penguin of penguins) box.set(penguin, true);\n\n    this.setState({\n      geojson: geojson,\n      // ドロップダウンリストの状態を初期化\n      dropdownPlace: [this.SELECT_ALL, ...places],\n      dropdownPlaceSelected: this.SELECT_ALL,\n      // チェックボックスの状態を初期化\n      checkboxPenguin: box,\n    });\n  }\n\n  /**\n   * マップを作成する\n   */\n  createMap() {\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: {\n        version: 8,\n        sources: {\n          OSM: {\n            type: \"raster\",\n            tiles: [\n              \"https://a.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n              \"https://b.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n              \"https://c.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n            ],\n            tileSize: 256,\n          },\n        },\n        layers: [\n          {\n            id: \"OSM\",\n            type: \"raster\",\n            source: \"OSM\",\n            //minzoom: 0,\n            //maxzoom: 18,\n          },\n        ],\n        glyphs: \"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf\",\n      },\n      attributionControl: true,\n      customAttribution: [\n        'Map: © <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">OpenStreetMap</a> contributors',\n        'Data: refer to <a href=\"https://www.jaza.jp/\" target=\"_blank\">JAZA (2020/12/7)</a>',\n      ],\n      center: [this.state.lng, this.state.lat],\n      zoom: this.state.zoom,\n    });\n\n    // load時の処理を登録\n    this.map.on(\"load\", () => {\n      this.map.addSource(\"source-place\", {\n        type: \"geojson\",\n        data: FILE_GeoJSON,\n      });\n      this.map.addLayer({\n        id: \"layer-place\",\n        type: \"circle\",\n        source: \"source-place\",\n        layout: {},\n        paint: {\n          \"circle-stroke-width\": 1,\n          \"circle-stroke-color\": \"black\",\n          \"circle-color\": [\n            \"interpolate\",\n            [\"linear\"],\n            [\"get\", \"penguin_num\"],\n            1,\n            \"blue\",\n            4.5,\n            \"yellow\",\n            8,\n            \"red\",\n          ],\n        },\n      });\n      this.map.addLayer({\n        id: \"layer-place-label\",\n        type: \"symbol\",\n        source: \"source-place\",\n        layout: {\n          \"text-field\": [\"format\", [\"get\", \"place\"]],\n          \"text-anchor\": \"bottom\",\n          \"text-radial-offset\": 0.7,\n          \"text-font\": [\"Open Sans Regular\"],\n        },\n        paint: {\n          \"text-halo-width\": 2,\n          \"text-halo-color\": \"rgba(255, 255, 255, 255)\",\n        },\n      });\n    });\n\n    // move時の処理を登録\n    this.map.on(\"move\", () => {\n      this.setState({\n        lng: this.map.getCenter().lng,\n        lat: this.map.getCenter().lat,\n        zoom: this.map.getZoom(),\n      });\n    });\n\n    // Create a popup, but don't add it to the map yet.\n    const popup = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false,\n    });\n\n    this.map.on(\"mouseenter\", \"layer-place\", (e) => {\n      // Change the cursor style as a UI indicator.\n      this.map.getCanvas().style.cursor = \"pointer\";\n\n      const coordinates = e.features[0].geometry.coordinates.slice();\n\n      const penguins = e.features[0].properties.penguin.split(\"_\");\n      const penguinsHTML =\n        \"<ul>\" + penguins.map((x) => \"<li>\" + x + \"</li>\").join(\"\") + \"</ul>\";\n      const placeHTML = \"<h6>\" + e.features[0].properties.place + \"</h6>\";\n      const description = placeHTML + penguinsHTML;\n\n      // Ensure that if the map is zoomed out such that multiple\n      // copies of the feature are visible, the popup appears\n      // over the copy being pointed to.\n      while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n      }\n\n      // Populate the popup and set its coordinates\n      // based on the feature found.\n      popup.setLngLat(coordinates).setHTML(description).addTo(this.map);\n    });\n\n    this.map.on(\"mouseleave\", \"layer-place\", () => {\n      this.map.getCanvas().style.cursor = \"\";\n      popup.remove();\n    });\n  }\n\n  /**\n   * イベントハンドラ\n   * @param {*} event\n   */\n  dropdownPlaceChanged(event) {\n    const item = event.target.value;\n\n    // マップにフィルタを適用\n    if (this.map.loaded()) {\n      if (item === this.SELECT_ALL) {\n        this.map.setFilter(\"layer-place\", null);\n        this.map.setFilter(\"layer-place-label\", null);\n      } else {\n        this.map.setFilter(\"layer-place\", [\"==\", [\"get\", \"place\"], item]);\n        this.map.setFilter(\"layer-place-label\", [\"==\", [\"get\", \"place\"], item]);\n      }\n    }\n\n    this.setState({ dropdownPlaceSelected: item });\n  }\n\n  /**\n   * イベントハンドラ\n   * @param {*} event\n   */\n  checkboxPenguinChanged(event) {\n    // 状態を更新\n    const boxState = this.state.checkboxPenguin;\n    const item = event.target.value;\n    const check = event.target.checked;\n    boxState.set(item, !boxState.get(item));\n    if (item === this.SELECT_ALL)\n      for (let key of boxState.keys()) boxState.set(key, check);\n    else if (check) {\n      let isAllChecked = true;\n      for (let [key, val] of boxState)\n        if (key !== this.SELECT_ALL && val === false) {\n          isAllChecked = false;\n          break;\n        }\n      if (isAllChecked) boxState.set(this.SELECT_ALL, true);\n    } else boxState.set(this.SELECT_ALL, false);\n\n    // マップにフィルタを適用\n    const placeSet = new Set();\n    for (let [key, val] of boxState)\n      if (val)\n        for (let f of this.state.geojson.features)\n          if (f.properties.penguin.includes(key))\n            placeSet.add(f.properties.place);\n    const places = Array.from(placeSet);\n    if (this.map.loaded()) {\n      this.map.setFilter(\"layer-place\", [\n        \"in\",\n        [\"get\", \"place\"],\n        [\"literal\", places],\n      ]);\n      this.map.setFilter(\"layer-place-label\", [\n        \"in\",\n        [\"get\", \"place\"],\n        [\"literal\", places],\n      ]);\n    }\n\n    this.setState({ checkboxPenguin: boxState });\n  }\n}\n\n/**\n * グラフ（飼育種類数）\n */\nclass GraphPenguinNumPerPlace extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      geojson: props.geojson,\n    };\n  }\n\n  componentWillReceiveProps(props) {\n    this.setState({ geojson: props.geojson });\n  }\n\n  render() {\n    const geojson = this.state.geojson;\n    if (geojson != null) {\n      const features = [...geojson.features];\n      features.sort(\n        (a, b) => a.properties.penguin_num - b.properties.penguin_num\n      );\n      return (\n        <div className=\"container-frame\">\n          <div className=\"graph-container\">\n            <Plot\n              className=\"graph\"\n              ref={(el) => (this.graph = el)}\n              data={[\n                {\n                  type: \"bar\",\n                  x: features.map((x) => x.properties.penguin_num),\n                  y: features.map((y) => y.properties.place),\n                  orientation: \"h\",\n                },\n              ]}\n              layout={{\n                title: \"飼育種類数\",\n                showlegend: false,\n                margin: { t: 50 },\n                height: 2000,\n                xaxis: { side: \"top\" },\n                yaxis: { automargin: true },\n              }}\n              config={{ responsive: true, displayModeBar: false }}\n            />\n          </div>\n        </div>\n      );\n    } else return null;\n  }\n}\n\n/**\n * グラフ（飼育館数）\n */\nclass GraphPlaceNumPerPenguin extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      geojson: props.geojson,\n    };\n  }\n\n  componentWillReceiveProps(props) {\n    this.setState({ geojson: props.geojson });\n  }\n\n  render() {\n    const geojson = this.state.geojson;\n    if (geojson != null) {\n      const features = [...geojson.features];\n      const penNum = new Map();\n      for (let f of features) {\n        let pens = f.properties.penguin.split(\"_\");\n        for (let pen of pens) {\n          pen = pen.replace(/ペンギン$/, \"\");\n          if (penNum.has(pen)) penNum.set(pen, penNum.get(pen) + 1);\n          else penNum.set(pen, 0);\n        }\n      }\n      const penNumArray = [];\n      for (let [key, val] of penNum) penNumArray.push({ pen: key, num: val });\n      penNumArray.sort((a, b) => a.num - b.num);\n      return (\n        <div className=\"container-frame\">\n          <div className=\"graph-container\">\n            <Plot\n              className=\"graph\"\n              ref={(el) => (this.graph = el)}\n              data={[\n                {\n                  type: \"bar\",\n                  x: penNumArray.map((x) => x.num),\n                  y: penNumArray.map((y) => y.pen),\n                  orientation: \"h\",\n                },\n              ]}\n              layout={{\n                title: \"飼育館数\",\n                showlegend: false,\n                margin: { t: 50 },\n                height: 400,\n                xaxis: { side: \"top\" },\n                yaxis: { automargin: true },\n              }}\n              config={{ responsive: true, displayModeBar: false }}\n            />\n          </div>\n        </div>\n      );\n    } else return null;\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}